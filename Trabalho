#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<locale.h>

	typedef struct{
		int codigo;
		char nome[30];
		int qtd;
		int qtdMin;
		float precoCompra;
		float precoVenda;
		char situacao;
		int cont;
	}regprod;
	regprod Produto[2];
	
void menu(int contador[]);
void menuprodutos(int contador[]);
void menuregistro(regprod Produto[], int contador[]);
void atualizarproduto(int contador[]);
/*
regprod Produto: vetor de struct.
regprod Produto[]: *uma variável* do vetor de struct.

criar vetor na main.

*/

main(){
	setlocale(LC_ALL, "Portuguese");
	int contador[1];
	menu(contador);	
}








void menu(int contador[]){
	int resp;
	printf("............................................................................\n");
	printf("1 - Cadastrar produto\n");
	printf("2 - Registrar vendas\n");
	printf("3 - Relatórios\n");
	printf("4 - Sair\n");
	printf("............................................................................\n");
	scanf("%d", &resp);
	if(resp==1){
		menuprodutos(contador);
	}else{
		system("pause");
		system("cls");
	}
}

void menuprodutos(int contador[]){
	int resposta;
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("1 - Cadastrar produto\n");
	printf("2 - Atualizar produto\n");
	printf("3 - Excluir produto\n");
	printf("4 - Pesquisar nome do produto\n");
	printf("0 - VOLTAR\n");
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	scanf("%d", &resposta);
	if(resposta==1){
		menuregistro(Produto, contador);
	}else if(resposta==2){
		atualizarproduto(contador);
	}else{
		printf("\nBuilding...\n");
		menu(contador);
	}
	
}


void menuregistro(regprod Produto[], int contador[]){
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Código: \n");
	scanf("%d", &Produto[contador[1]].codigo);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Nome do produto:\n");
	scanf("%s", &Produto[contador[1]].nome[30]);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Quantidade em estoque:\n");
	scanf("%d", &Produto[contador[1]].qtd);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Quantidade mínima: ");
	scanf("%d", &Produto[contador[1]].qtdMin);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Preço de compra: ");
	scanf("%d", &Produto[contador[1]].precoCompra);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Preço de venda: ");
	scanf("%d", &Produto[contador[1]].precoVenda);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("Situação: ");
	scanf("%s", &Produto[contador[1]].situacao);
	printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
	printf("\nProduto registrado com sucesso!\n");
	system("pause");
	system("cls");
	printf("Contador: %d\n", contador[1]);
	++contador[1];
	printf("Contador pós incremento: %d\n", contador[1]);
	menu(contador);
}


void atualizarproduto(int contador[]){
	int code, i=0, resp, error=0;
	printf("Informe o código do produto a ser atualizado: ");
	scanf("%d", &code);
	while(i<2){
		if(code==Produto[i].codigo){
			printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf("1 - Nome\n");
			printf("2 - Quantidade\n");
			printf("3 - Quantidade mínima\n");
			printf("4 - Preço de compra\n");
			printf("5 - Preço de venda\n");
			printf("6 - Situação\n");
			printf(":::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n");
			printf("Informe o que deseja alterar: ");
			scanf("%d", &resp);
			if(resp==1){
				printf("\nInforme o novo nome: ");
				scanf("%d", &Produto[i].nome[30]);
			}else if(resp==2){
				printf("Informe a nova quantidade: ");
				scanf("%d", &Produto[i].qtd);
			}else if(resp==3){
				printf("Informe a nova quantidade mínima: ");
				scanf("%d", &Produto[i].qtdMin);
			}else if(resp==4){
				printf("Informe o novo preço de compra: ");
				scanf("%d", &Produto[i].precoCompra);
			}else if(resp==5){
				printf("Informe o novo preço de venda: ");
				scanf("%d", &Produto[i].precoVenda);
			}else if(resp==6){
				printf("Informe a nova situação: ");
				scanf("%d", &Produto[i].precoVenda);
			}else{
				printf("Opção inválida.");
				system("pause");
				system("cls");
				menu(contador);
			}
		}
		i++;
	}
	system("pause");
	system("cls");
	menu(contador);	
}
